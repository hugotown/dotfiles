# ~/.config/fish/config.fish
# Manual configuration - NOT managed by home-manager
# Philosophy: Nix installs â†’ User configures in ~/.config

# ===========================================
# Shell Integrations
# ===========================================

# Zoxide - smart cd
if type -q zoxide
    zoxide init fish | source
end

# Atuin - shell history search
if type -q atuin
    atuin init fish | source
end

# ===========================================
# Aliases
# ===========================================

alias cldy='claude --dangerously-skip-permissions'

# ===========================================
# SOPS Secrets
# ===========================================

# Load API keys from sops-nix
# These paths are generated by home-manager's sops configuration
if test -f ~/.config/sops-nix/secrets/gemini_api_key
    set -gx GEMINI_API_KEY (cat ~/.config/sops-nix/secrets/gemini_api_key)
end

if test -f ~/.config/sops-nix/secrets/google_api_key
    set -gx GOOGLE_API_KEY (cat ~/.config/sops-nix/secrets/google_api_key)
end

# ===========================================
# Functions
# ===========================================

# Yazi wrapper function - cd to last directory on exit
# Note: This is also defined in ~/.config/fish/functions/y.fish
# Fish will automatically source it from there.

# ===========================================
# Environment Variables
# ===========================================

# Add custom paths if needed (home-manager handles most via sessionPath)
# set -gx PATH $HOME/.local/bin $PATH

# ===========================================
# Completions
# ===========================================

# Home-manager generated completions are automatically added to fish_complete_path
source ~/.zoxide.fish
source ~/.atuin.fish
source ~/.yazi.fish
source ~/.cldy.fish
